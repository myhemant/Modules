!function(i,n){n.behaviors.PgwsliderView={attach:function(n,t){var e=t.PgwsliderView;i(n).find("body").once("once").each(function(){for(var i in e)var n=e[i].$pgw_autoplay,t=e[i].$pgw_arrownavigator,s=e[i].$pgw_displaylist,l=e[i].$pgw_caption,o=e[i].$pgw_autoplayinterval,r=e[i].$pgwdisplay_count,a=e[i].$pgwtransition_effect;!function(i){i.fn.pgwSlideshow=function(e){var u={mainClassName:"pgwSlideshow",transitionEffect:a,displayList:s,displayControls:t,touchControls:!0,autoSlide:n,beforeSlide:!1,afterSlide:!1,maxHeight:null,adaptiveDuration:200,transitionDuration:500,intervalDuration:o,displayCaption:l};if(0==this.length)return this;if(this.length>1)return this.each(function(){i(this).pgwSlideshow(e)}),this;var c=this;c.plugin=this,c.config={},c.data=[],c.currentSlide=0,c.slideCount=0,c.resizeEvent=null,c.intervalEvent=null,c.touchFirstPosition=null,c.touchListLastPosition=!1,c.window=i(window);var p=function(){return c.config=i.extend({},u,e),h(),c.config.displayList&&C(),c.window.resize(function(){clearTimeout(c.resizeEvent),c.resizeEvent=setTimeout(function(){g();var i=c.plugin.find(".ps-current > ul > li.elt_"+c.currentSlide+" img").height();f(i),c.config.displayList&&(C(),b())},100)}),c.config.autoSlide&&x(),!0},f=function(i,n){return c.config.maxHeight&&i+c.plugin.find(".ps-list").height()>c.config.maxHeight&&(i=c.config.maxHeight-c.plugin.find(".ps-list").height()),"function"==typeof c.plugin.find(".ps-current").animate?c.plugin.find(".ps-current").stop().animate({height:i},c.config.adaptiveDuration,function(){c.config.maxHeight&&c.plugin.find(".ps-current > ul > li img").css("max-height",i+"px")}):(c.plugin.find(".ps-current").css("height",i),c.config.maxHeight&&c.plugin.find(".ps-current > ul > li img").css("max-height",i+"px")),!0},d=function(){var n=0;return c.plugin.show(),c.plugin.find(".ps-list > ul > li").show().each(function(){n+=i(this).width()}),c.plugin.find(".ps-list > ul").width(n),!0},g=function(){return c.plugin.width()<=480?c.plugin.addClass("narrow").removeClass("wide"):c.plugin.addClass("wide").removeClass("narrow"),!0},h=function(){c.plugin.removeClass("pgwSlideshow").removeClass(c.config.mainClassName),c.plugin.wrap('<div class="ps-list"></div>'),c.plugin=c.plugin.parent(),c.plugin.wrap('<div class="'+c.config.mainClassName+'"></div>'),c.plugin=c.plugin.parent();var n="";if(c.config.displayCaption&&(n='<span class="ps-caption"></span>'),c.plugin.prepend('<div class="ps-current"><ul></ul>'+n+"</div>"),c.slideCount=c.plugin.find(".ps-list > ul > li").length,0==c.slideCount)throw new Error("pgwSlideshow - No slider item has been found");c.slideCount>1&&(c.config.displayControls&&(c.plugin.find(".ps-current").prepend('<span class="ps-prev"><span class="ps-prevIcon"></span></span>'),c.plugin.find(".ps-current").append('<span class="ps-next"><span class="ps-nextIcon"></span></span>'),c.plugin.find(".ps-current .ps-prev").click(function(){c.previousSlide()}),c.plugin.find(".ps-current .ps-next").click(function(){c.nextSlide()})),c.plugin.find(".ps-list").prepend('<div class="slidebar-container"><div class="slidebar">&nbsp;</div></div>'),c.config.touchControls&&(c.plugin.find(".ps-current").on("touchstart",function(i){try{i.originalEvent.touches[0].clientX&&null==c.touchFirstPosition&&(c.touchFirstPosition=i.originalEvent.touches[0].clientX)}catch(i){c.touchFirstPosition=null}}),c.plugin.find(".ps-current").on("touchmove",function(i){try{i.originalEvent.touches[0].clientX&&null!=c.touchFirstPosition&&(i.originalEvent.touches[0].clientX>c.touchFirstPosition+50?(c.touchFirstPosition=null,c.previousSlide()):i.originalEvent.touches[0].clientX<c.touchFirstPosition-50&&(c.touchFirstPosition=null,c.nextSlide()))}catch(i){c.touchFirstPosition=null}}),c.plugin.find(".ps-current").on("touchend",function(i){c.touchFirstPosition=null})));var t=1;return c.plugin.find(".ps-list > ul > li").each(function(){var n=v(i(this));n.id=t,c.data.push(n),i(this).addClass("elt_"+n.id),i(this).wrapInner('<span class="ps-item'+(1==t?" ps-selected":"")+'"></span>');var e=i('<li class="elt_'+t+'"></li>');n.image?e.html('<img src="'+n.image+'" alt="'+(n.title?n.title:"")+'">'):n.thumbnail&&e.html('<img src="'+n.thumbnail+'" alt="'+(n.title?n.title:"")+'">'),n.link&&e.html('<a href="'+n.link+'"'+(n.linkTarget?' target="'+n.linkTarget+'"':"")+">"+e.html()+"</a>"),c.plugin.find(".ps-current > ul").append(e),i(this).css("cursor","pointer").click(function(i){i.preventDefault(),S(n.id)}),t++}),c.config.displayList?(d(),c.plugin.find(".ps-list").prepend('<span class="ps-prev"><span class="ps-prevIcon"></span></span>'),c.plugin.find(".ps-list").append('<span class="ps-next"><span class="ps-nextIcon"></span></span>'),c.plugin.find(".ps-list").show()):c.plugin.find(".ps-list").hide(),c.config.autoSlide&&c.plugin.on("mouseenter",function(){clearInterval(c.intervalEvent),c.intervalEvent=null}).on("mouseleave",function(){x()}),c.plugin.find(".ps-current > ul > li").hide(),S(1),c.plugin.find(".ps-current > ul > li.elt_1 img").on("load",function(){g();var i=c.plugin.find(".ps-current > ul > li.elt_1 img").height();f(i)}),g(),c.plugin.show(),!0},v=function(i){var n={},t=i.find("a").attr("href");if("undefined"!=typeof t&&""!=t){n.link=t;var e=i.find("a").attr("target");"undefined"!=typeof e&&""!=e&&(n.linkTarget=e)}var s=i.find("img").attr("src");"undefined"!=typeof s&&""!=s&&(n.thumbnail=s);var l=i.find("img").attr("data-large-src");"undefined"!=typeof l&&""!=l&&(n.image=l);var o=i.find("img").attr("alt");"undefined"!=typeof o&&""!=o&&(n.title=o);var r=i.find("img").attr("data-description");return"undefined"!=typeof r&&""!=r&&(n.description=r),n},m=function(i){var n="";r&&(n+="<center>"+i.id+" of "+c.slideCount+"</center>");var t=100/c.slideCount,e=t*i.id;i.title&&(n+=i.title),i.description&&(""!=n&&(n+="<br>"),n+=i.description),""!=n&&(i.link&&(n='<a href="'+i.link+'"'+(i.linkTarget?' target="'+i.linkTarget+'"':"")+">"+n+"</a>"),"function"==typeof c.plugin.find(".ps-caption").fadeIn?(c.plugin.find(".ps-caption").html(n),c.plugin.find(".slidebar").css("background-color","blue"),c.plugin.find(".slidebar").css("width",e+"%"),c.plugin.find(".ps-caption").fadeIn(c.config.transitionDuration/2)):(c.plugin.find(".ps-caption").html(n),c.plugin.find(".ps-caption").show())),c.plugin.find(".ps-list > ul > li .ps-item").removeClass("ps-selected"),c.plugin.find(".ps-list > ul > li.elt_"+i.id+" .ps-item").addClass("ps-selected"),c.config.displayList&&(C(),b()),c.config.displayControls&&("function"==typeof c.plugin.find(".ps-current > .ps-prev").fadeIn?c.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").fadeIn(c.config.transitionDuration/2):c.plugin.find(".ps-current > .ps-prev, .ps-current > .ps-next").show()),"function"==typeof c.config.afterSlide&&c.config.afterSlide(i.id);var s=c.plugin.find(".ps-current .elt_"+i.id+" img").height();return f(s,!0),!0},w=function(n){var t=c.plugin.find(".ps-current > ul");if(t.find("li").not(".elt_"+c.currentSlide).not(".elt_"+n.id).each(function(){"function"==typeof i(this).stop&&i(this).stop(),i(this).css("position","").css("z-index",1).hide()}),c.currentSlide>0){var e=t.find(".elt_"+c.currentSlide);"function"!=typeof e.animate&&(e.animate=function(i,n,t){e.css(i),t&&t()}),"function"==typeof e.stop&&e.stop(),e.css("position","absolute").animate({opacity:0},c.config.transitionDuration,function(){e.css("position","").css("z-index",1).hide()})}c.currentSlide=n.id;var s=t.find(".elt_"+n.id);return"function"!=typeof s.animate&&(s.animate=function(i,n,t){s.css(i),t&&t()}),"function"==typeof s.stop&&s.stop(),s.css("position","absolute").show().animate({opacity:1},c.config.transitionDuration,function(){s.css("position","").css("z-index",2).css("display","block"),m(n)}),!0},y=function(i,n){var t=c.plugin.find(".ps-current > ul");if("undefined"==typeof n&&(n="left"),0==c.currentSlide)t.find(".elt_1").css({position:"",left:"",opacity:1,"z-index":2}).show(),c.plugin.find(".ps-list > li.elt_1").css("opacity","1"),m(i);else{if(c.transitionInProgress)return!1;c.transitionInProgress=!0;var e=t.width();if("left"==n)var s=-e,l=e;else var s=e,l=-e;var o=t.find(".elt_"+c.currentSlide);"function"!=typeof o.animate&&(o.animate=function(i,n,t){o.css(i),t&&t()}),o.css("position","absolute").animate({left:s},c.config.transitionDuration,function(){o.css("position","").css("z-index",1).css("left","").css("opacity",0).hide()});var r=t.find(".elt_"+i.id);"function"!=typeof r.animate&&(r.animate=function(i,n,t){r.css(i),t&&t()}),r.css("position","absolute").css("left",l).css("opacity",1).show().animate({left:0},c.config.transitionDuration,function(){r.css("position","").css("left","").css("z-index",2).show(),c.transitionInProgress=!1,m(i)})}return c.currentSlide=i.id,!0},S=function(i,n,t){if(i==c.currentSlide)return!1;var e=c.data[i-1];if("undefined"==typeof e)throw new Error("pgwSlideshow - The element "+i+" is undefined");return"undefined"==typeof t&&(t="left"),"function"==typeof c.config.beforeSlide&&c.config.beforeSlide(i),"function"==typeof c.plugin.find(".ps-caption").fadeOut?c.plugin.find(".ps-caption, .ps-prev, .ps-next").fadeOut(c.config.transitionDuration/2):c.plugin.find(".ps-caption, .ps-prev, .ps-next").hide(),"sliding"==c.config.transitionEffect?y(e,t):w(e),"undefined"!=typeof n&&c.config.autoSlide&&x(),!0},x=function(){return clearInterval(c.intervalEvent),c.slideCount>1&&c.config.autoSlide&&(c.intervalEvent=setInterval(function(){if(c.currentSlide+1<=c.slideCount)var i=c.currentSlide+1;else var i=1;S(i)},c.config.intervalDuration)),!0},C=function(){if(!c.config.displayList)return!1;d();var i=c.plugin.find(".ps-list"),n=i.width(),t=c.plugin.find(".ps-list > ul"),e=t.width();if(e>n){t.css("margin","0 45px");var s=parseInt(t.css("margin-left")),l=parseInt(t.css("margin-right"));n-=s+l,i.find(".ps-prev").show().unbind("click").click(function(){var i=parseInt(t.css("left")),s=i+n;0==i?s=-(e-n):s>0&&(s=0),"function"==typeof t.animate?t.animate({left:s},c.config.transitionDuration):t.css("left",s)}),i.find(".ps-next").show().unbind("click").click(function(){var i=parseInt(t.css("left")),s=i-n,l=-(e-n);i==l?s=0:l>s&&(s=l),"function"==typeof t.animate?t.animate({left:s},c.config.transitionDuration):t.css("left",s)}),c.config.touchControls&&(c.plugin.find(".ps-list > ul").on("touchmove",function(n){try{if(n.originalEvent.touches[0].clientX){var e=0==c.touchListLastPosition?0:c.touchListLastPosition;nbPixels=0==c.touchListLastPosition?1:Math.abs(e-n.originalEvent.touches[0].clientX),c.touchListLastPosition=n.originalEvent.touches[0].clientX;var s="";e>n.originalEvent.touches[0].clientX?s="left":e<n.originalEvent.touches[0].clientX&&(s="right")}var l=parseInt(t.css("left"));if("left"==s){var o=i.width(),r=t.width(),a=parseInt(t.css("margin-left")),u=parseInt(t.css("margin-right"));o-=a+u;var p=-(r-o),f=l-nbPixels;f>p&&t.css("left",f)}else if("right"==s){var f=l+nbPixels;0>f?t.css("left",f):t.css("left",0)}}catch(n){c.touchListLastPosition=!1}}),c.plugin.find(".ps-list > ul").on("touchend",function(i){c.touchListLastPosition=!1}))}else{var s=parseInt((n-e)/2);t.css("left",0).css("margin-left",s),i.find(".ps-prev").hide(),i.find(".ps-next").hide(),c.plugin.find(".ps-list > ul").unbind("touchstart touchmove touchend")}return!0},b=function(){var i=c.plugin.find(".ps-list").width(),n=c.plugin.find(".ps-list > ul"),t=n.width(),e=parseInt(n.css("margin-left")),s=parseInt(n.css("margin-right"));i-=e+s;var l=Math.abs(parseInt(n.css("left"))),o=l+i,r=c.plugin.find(".ps-list .ps-selected").position().left,a=r+c.plugin.find(".ps-list .ps-selected").width();if(l>r||a>o||t>i&&o>a){var u=-(t-i);u>-r?n.css("left",u):n.css("left",-r)}return!0};return c.startSlide=function(){return c.config.autoSlide=!0,x(),!0},c.stopSlide=function(){return c.config.autoSlide=!1,clearInterval(c.intervalEvent),!0},c.getCurrentSlide=function(){return c.currentSlide},c.getSlideCount=function(){return c.slideCount},c.displaySlide=function(i){return S(i,!0),!0},c.nextSlide=function(){if(c.currentSlide+1<=c.slideCount)var i=c.currentSlide+1;else var i=1;return S(i,!0,"left"),!0},c.previousSlide=function(){if(c.currentSlide-1>=1)var i=c.currentSlide-1;else var i=c.slideCount;return S(i,!0,"right"),!0},c.destroy=function(n){return clearInterval(c.intervalEvent),"undefined"!=typeof n?(c.plugin.find(".ps-list > ul > li").each(function(){i(this).attr("style",null).removeClass().unbind("click"),i(this).html(i(this).find("span").html())}),c.plugin.find(".ps-current").remove(),c.plugin.find(".ps-list").find(".ps-prev, .ps-next").remove(),c.plugin.find(".ps-list > ul").addClass(c.config.mainClassName).attr("style",""),c.plugin.find(".ps-list > ul").unwrap().unwrap(),c.hide()):c.parent().parent().remove(),c.plugin=null,c.data=[],c.config={},c.currentSlide=0,c.slideCount=0,c.resizeEvent=null,c.intervalEvent=null,c.touchFirstPosition=null,c.window=null,!0},c.reload=function(n){return c.destroy(!0),c=this,c.plugin=this,c.window=i(window),c.plugin.show(),c.config=i.extend({},u,n),h(),c.window.resize(function(){clearTimeout(c.resizeEvent),c.resizeEvent=setTimeout(function(){g();var i=c.plugin.find(".ps-current > ul > li.elt_"+c.currentSlide+" img").css("max-height","").height();f(i),c.config.displayList&&(C(),b())},100)}),c.config.autoSlide&&x(),!0},p(),this},i(document).ready(function(){i(".pgwSlideshow").pgwSlideshow()})}(window.Zepto||window.jQuery)})}}}(jQuery,Drupal);